# Default values for datacube-wms.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
replicaCount: 1
image:
  registry: docker.io
  repository: opendatacube/dashboard
  tag: 'stable'
  pullPolicy: Always

datacube:
  configPath: /opt/odc/datacube.conf
database:
  database: datacube
  host: localhost
  port: 5432
  existingSecret: datacube
  adminSecret: datacube

resources:
  limits:
    cpu: "300m"
    memory: 1024Mi
dockerArgs: [ "gunicorn", "-b", "0.0.0.0:8080", "-w", "1", "--timeout", "60", "cubedash:app" ]
annotations:
  iam.amazonaws.com/role: kubernetes-wms
additionalEnvironmentVars: { }
update:
  enabled: false
  historyLimit: 1
  cron: "0 0 31 2 *"
  suspend: true
  dockerArgs: [ "cubedash-gen", "--all", "||", "true"]

service:
  type: NodePort
  port: 8080

setup:
  dockerArgs: [ "/bin/bash", "-c", "PGPASSWORD=$ADMIN_PASSWORD psql -h $DB_HOSTNAME -p 5432 -U $ADMIN_USERNAME -d $DB_DATABASE -c 'CREATE EXTENSION IF NOT EXISTS postgis'" ]
  image:
    registry: docker.io
    repository: postgres
    tag: 10
    pullPolicy: IfNotPresent

ingress:
  ## Enable Ingress.
  ##
  enabled: false
  host:

livenessProbe:
  httpGet:
    path: "/"
    port: 8080
  initialDelaySeconds: 10
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: "/"
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 10

additionalSettings: